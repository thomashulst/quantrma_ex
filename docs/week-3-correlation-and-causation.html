<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 3 Week 3: Correlation and Causation | Lab manual QuantRMA</title>
  <meta name="description" content="The lab manual for quantitative research methods and data analysis at EUC. This text was adapted from “Answering questions with data: Lab Manual” by Matthew J.C. Crump and colleagues (https://crumplab.github.io/statistics/)" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content=" 3 Week 3: Correlation and Causation | Lab manual QuantRMA" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The lab manual for quantitative research methods and data analysis at EUC. This text was adapted from “Answering questions with data: Lab Manual” by Matthew J.C. Crump and colleagues (https://crumplab.github.io/statistics/)" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 3 Week 3: Correlation and Causation | Lab manual QuantRMA" />
  
  <meta name="twitter:description" content="The lab manual for quantitative research methods and data analysis at EUC. This text was adapted from “Answering questions with data: Lab Manual” by Matthew J.C. Crump and colleagues (https://crumplab.github.io/statistics/)" />
  

<meta name="author" content="Original authors: Matthew J. C. Crump, Anjali Krishnan, Stephen Volz, and Alla Chavarga" />
<meta name="author" content="Adapted for EUC by Thomas Hulst and Thanos Kostopoulos" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="week-2-describing-data.html"/>
<link rel="next" href="week-4-chance-and-probability-theory.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Lab manual QuantRMA</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#important-notes"><i class="fa fa-check"></i>Important notes</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#attributions"><i class="fa fa-check"></i>Attributions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cc-by-sa-4.0-license"><i class="fa fa-check"></i>CC BY-SA 4.0 license</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html"><i class="fa fa-check"></i>Getting started</a>
<ul>
<li class="chapter" data-level="0.1" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#why-r"><i class="fa fa-check"></i><b>0.1</b> Why R?</a></li>
<li class="chapter" data-level="0.2" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#downloading-and-installing-r"><i class="fa fa-check"></i><b>0.2</b> Downloading and installing R</a>
<ul>
<li class="chapter" data-level="0.2.1" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#installing-r-on-a-mac"><i class="fa fa-check"></i><b>0.2.1</b> Installing R on a Mac</a></li>
<li class="chapter" data-level="0.2.2" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#installing-r-on-a-windows-pc"><i class="fa fa-check"></i><b>0.2.2</b> Installing R on a Windows PC</a></li>
<li class="chapter" data-level="0.2.3" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#installing-r-on-a-linux-pc"><i class="fa fa-check"></i><b>0.2.3</b> Installing R on a Linux PC</a></li>
</ul></li>
<li class="chapter" data-level="0.3" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#RStudio"><i class="fa fa-check"></i><b>0.3</b> Downloading and installing RStudio</a></li>
<li class="chapter" data-level="0.4" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#understanding-rstudio"><i class="fa fa-check"></i><b>0.4</b> Understanding RStudio</a>
<ul>
<li class="chapter" data-level="0.4.1" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#consoleR"><i class="fa fa-check"></i><b>0.4.1</b> Console</a></li>
<li class="chapter" data-level="0.4.2" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#script-editor"><i class="fa fa-check"></i><b>0.4.2</b> Script Editor</a></li>
<li class="chapter" data-level="0.4.3" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#workspace-and-history"><i class="fa fa-check"></i><b>0.4.3</b> Workspace and History</a></li>
<li class="chapter" data-level="0.4.4" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#fileplot"><i class="fa fa-check"></i><b>0.4.4</b> File, Plot, Packages, Help</a></li>
<li class="chapter" data-level="0.4.5" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#install-lib"><i class="fa fa-check"></i><b>0.4.5</b> Installing libraries</a></li>
</ul></li>
<li class="chapter" data-level="0.5" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#how-to-complete-the-labs"><i class="fa fa-check"></i><b>0.5</b> How to complete the labs</a>
<ul>
<li class="chapter" data-level="0.5.1" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#r-project"><i class="fa fa-check"></i><b>0.5.1</b> R project</a></li>
<li class="chapter" data-level="0.5.2" data-path="getting-started-adapted1.html"><a href="getting-started-adapted1.html#rmarkdown"><i class="fa fa-check"></i><b>0.5.2</b> RMarkdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html"><i class="fa fa-check"></i><b>1</b> Week 1: Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#learning-goals"><i class="fa fa-check"></i><b>1.1</b> Learning goals</a></li>
<li class="chapter" data-level="1.2" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#how-to-use-this-lab-manual"><i class="fa fa-check"></i><b>1.2</b> How to use this lab manual</a></li>
<li class="chapter" data-level="1.3" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#rmarkdown-basics"><i class="fa fa-check"></i><b>1.3</b> RMarkdown basics</a></li>
<li class="chapter" data-level="1.4" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#research-methods-measurement"><i class="fa fa-check"></i><b>1.4</b> Research methods: measurement</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#question-1"><i class="fa fa-check"></i><b>1.4.1</b> Question 1</a></li>
<li class="chapter" data-level="1.4.2" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#question-2"><i class="fa fa-check"></i><b>1.4.2</b> Question 2</a></li>
<li class="chapter" data-level="1.4.3" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#question-3"><i class="fa fa-check"></i><b>1.4.3</b> Question 3</a></li>
<li class="chapter" data-level="1.4.4" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#question-4"><i class="fa fa-check"></i><b>1.4.4</b> Question 4</a></li>
<li class="chapter" data-level="1.4.5" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#question-5"><i class="fa fa-check"></i><b>1.4.5</b> Question 5</a></li>
<li class="chapter" data-level="1.4.6" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#question-6"><i class="fa fa-check"></i><b>1.4.6</b> Question 6</a></li>
<li class="chapter" data-level="1.4.7" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#question-7"><i class="fa fa-check"></i><b>1.4.7</b> Question 7</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#basic-r"><i class="fa fa-check"></i><b>1.5</b> Basic R</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#arithmetic"><i class="fa fa-check"></i><b>1.5.1</b> Doing simple calculations with R</a></li>
<li class="chapter" data-level="1.5.2" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#usingfunctions"><i class="fa fa-check"></i><b>1.5.2</b> Using functions to do calculations</a></li>
<li class="chapter" data-level="1.5.3" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#assign"><i class="fa fa-check"></i><b>1.5.3</b> Storing a number as a variable</a></li>
<li class="chapter" data-level="1.5.4" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#usecomments"><i class="fa fa-check"></i><b>1.5.4</b> Using comments</a></li>
<li class="chapter" data-level="1.5.5" data-path="week-1-introductionweek1-introduction-1.html"><a href="week-1-introductionweek1-introduction-1.html#r-is-pretty-stupid"><i class="fa fa-check"></i><b>1.5.5</b> R is pretty stupid?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html"><i class="fa fa-check"></i><b>2</b> Week 2: Describing Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#learning-goals-1"><i class="fa fa-check"></i><b>2.1</b> Learning goals</a></li>
<li class="chapter" data-level="2.2" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#loadingdata"><i class="fa fa-check"></i><b>2.2</b> Loading data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#firstlook"><i class="fa fa-check"></i><b>2.2.1</b> First look at the data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#making-graphs"><i class="fa fa-check"></i><b>2.3</b> Making graphs</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#wranglefirst"><i class="fa fa-check"></i><b>2.3.1</b> Wrangle first</a></li>
<li class="chapter" data-level="2.3.2" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#plotcounts"><i class="fa fa-check"></i><b>2.3.2</b> Plotting <code>counts</code></a></li>
<li class="chapter" data-level="2.3.3" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#addggplot"><i class="fa fa-check"></i><b>2.3.3</b> Additional materials: <code>ggplot()</code> layers and functions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#gaplab"><i class="fa fa-check"></i><b>2.4</b> Gapminder dataset</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#look-at-the-data"><i class="fa fa-check"></i><b>2.4.1</b> Look at the data</a></li>
<li class="chapter" data-level="2.4.2" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#life-expectancy"><i class="fa fa-check"></i><b>2.4.2</b> Life expectancy</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#using-numbers-to-describe-data"><i class="fa fa-check"></i><b>2.5</b> Using numbers to describe data</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#playing-with-numbers"><i class="fa fa-check"></i><b>2.5.1</b> Playing with numbers</a></li>
<li class="chapter" data-level="2.5.2" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#central-tendency"><i class="fa fa-check"></i><b>2.5.2</b> Central Tendency</a></li>
<li class="chapter" data-level="2.5.3" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#variation"><i class="fa fa-check"></i><b>2.5.3</b> Variation</a></li>
<li class="chapter" data-level="2.5.4" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#descbycond"><i class="fa fa-check"></i><b>2.5.4</b> Descriptives by conditions</a></li>
<li class="chapter" data-level="2.5.5" data-path="week-2-describing-data.html"><a href="week-2-describing-data.html#describing-gapminder-with-numbers"><i class="fa fa-check"></i><b>2.5.5</b> Describing Gapminder with numbers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html"><i class="fa fa-check"></i><b>3</b> Week 3: Correlation and Causation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#learning-goals-2"><i class="fa fa-check"></i><b>3.1</b> Learning goals</a></li>
<li class="chapter" data-level="3.2" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#research-methods-causality"><i class="fa fa-check"></i><b>3.2</b> Research methods: causality</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#question-1-1"><i class="fa fa-check"></i><b>3.2.1</b> Question 1</a></li>
<li class="chapter" data-level="3.2.2" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#question-2-1"><i class="fa fa-check"></i><b>3.2.2</b> Question 2</a></li>
<li class="chapter" data-level="3.2.3" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#question-3-1"><i class="fa fa-check"></i><b>3.2.3</b> Question 3</a></li>
<li class="chapter" data-level="3.2.4" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#question-4-1"><i class="fa fa-check"></i><b>3.2.4</b> Question 4</a></li>
<li class="chapter" data-level="3.2.5" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#question-5-1"><i class="fa fa-check"></i><b>3.2.5</b> Question 5</a></li>
<li class="chapter" data-level="3.2.6" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#question-6-1"><i class="fa fa-check"></i><b>3.2.6</b> Question 6</a></li>
<li class="chapter" data-level="3.2.7" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#question-7-1"><i class="fa fa-check"></i><b>3.2.7</b> Question 7</a></li>
<li class="chapter" data-level="3.2.8" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#question-8"><i class="fa fa-check"></i><b>3.2.8</b> Question 8</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#correlations-in-r"><i class="fa fa-check"></i><b>3.3</b> Correlations in R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#corforcor"><i class="fa fa-check"></i><b>3.3.1</b> <code>cor()</code> for correlation</a></li>
<li class="chapter" data-level="3.3.2" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#correlation-exercises"><i class="fa fa-check"></i><b>3.3.2</b> Correlation exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#real-data"><i class="fa fa-check"></i><b>3.4</b> Real data</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#load-the-data"><i class="fa fa-check"></i><b>3.4.1</b> Load the data</a></li>
<li class="chapter" data-level="3.4.2" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#look-at-the-data-1"><i class="fa fa-check"></i><b>3.4.2</b> Look at the data</a></li>
<li class="chapter" data-level="3.4.3" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#exampleq1"><i class="fa fa-check"></i><b>3.4.3</b> Example question #1</a></li>
<li class="chapter" data-level="3.4.4" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#example-question-2"><i class="fa fa-check"></i><b>3.4.4</b> Example question #2</a></li>
<li class="chapter" data-level="3.4.5" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#theory-exercises"><i class="fa fa-check"></i><b>3.4.5</b> Theory exercises</a></li>
<li class="chapter" data-level="3.4.6" data-path="week-3-correlation-and-causation.html"><a href="week-3-correlation-and-causation.html#data-exercise"><i class="fa fa-check"></i><b>3.4.6</b> Data exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html"><i class="fa fa-check"></i><b>4</b> Week 4: Chance and Probability Theory</a>
<ul>
<li class="chapter" data-level="4.1" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#learning-goals-3"><i class="fa fa-check"></i><b>4.1</b> Learning goals</a></li>
<li class="chapter" data-level="4.2" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#correlation-and-random-chance"><i class="fa fa-check"></i><b>4.2</b> Correlation and random chance</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#chanceex"><i class="fa fa-check"></i><b>4.2.1</b> Chance exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#generating-data-with-sample-and-binom"><i class="fa fa-check"></i><b>4.3</b> Generating data with <code>sample()</code> and <code>binom()</code></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#samplefunc"><i class="fa fa-check"></i><b>4.3.1</b> <code>sample()</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#rbinom"><i class="fa fa-check"></i><b>4.3.2</b> <code>rbinom()</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#sample-and-binom-exercises"><i class="fa fa-check"></i><b>4.3.3</b> <code>sample</code> and <code>binom()</code> exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#normal-distribution"><i class="fa fa-check"></i><b>4.4</b> Normal distribution</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#rnorm"><i class="fa fa-check"></i><b>4.4.1</b> <code>rnorm()</code></a></li>
<li class="chapter" data-level="4.4.2" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#graphing-the-normal-distribution"><i class="fa fa-check"></i><b>4.4.2</b> Graphing the normal distribution</a></li>
<li class="chapter" data-level="4.4.3" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#pnorm"><i class="fa fa-check"></i><b>4.4.3</b> Calculating the probability of specific ranges.</a></li>
<li class="chapter" data-level="4.4.4" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#normex"><i class="fa fa-check"></i><b>4.4.4</b> <code>norm()</code> exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#z-scores"><i class="fa fa-check"></i><b>4.5</b> z-scores</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="week-4-chance-and-probability-theory.html"><a href="week-4-chance-and-probability-theory.html#z-score-exercises"><i class="fa fa-check"></i><b>4.5.1</b> z-score exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html"><i class="fa fa-check"></i><b>5</b> Week 5: Estimation and Sampling Theory</a>
<ul>
<li class="chapter" data-level="5.1" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#learning-goals-4"><i class="fa fa-check"></i><b>5.1</b> Learning goals</a></li>
<li class="chapter" data-level="5.2" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#collecting-some-data"><i class="fa fa-check"></i><b>5.2</b> Collecting some data</a></li>
<li class="chapter" data-level="5.3" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#research-methods-sampling-theory"><i class="fa fa-check"></i><b>5.3</b> Research methods: sampling theory</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#question-1-2"><i class="fa fa-check"></i><b>5.3.1</b> Question 1</a></li>
<li class="chapter" data-level="5.3.2" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#question-2-2"><i class="fa fa-check"></i><b>5.3.2</b> Question 2</a></li>
<li class="chapter" data-level="5.3.3" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#question-3-2"><i class="fa fa-check"></i><b>5.3.3</b> Question 3</a></li>
<li class="chapter" data-level="5.3.4" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#question-4-2"><i class="fa fa-check"></i><b>5.3.4</b> Question 4</a></li>
<li class="chapter" data-level="5.3.5" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#question-5-2"><i class="fa fa-check"></i><b>5.3.5</b> Question 5</a></li>
<li class="chapter" data-level="5.3.6" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#question-6-2"><i class="fa fa-check"></i><b>5.3.6</b> Question 6</a></li>
<li class="chapter" data-level="5.3.7" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#q7rep"><i class="fa fa-check"></i><b>5.3.7</b> Question 7</a></li>
<li class="chapter" data-level="5.3.8" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#question-8-1"><i class="fa fa-check"></i><b>5.3.8</b> Question 8</a></li>
<li class="chapter" data-level="5.3.9" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#question-9"><i class="fa fa-check"></i><b>5.3.9</b> Question 9</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#stroopdata"><i class="fa fa-check"></i><b>5.4</b> Stroop data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="week-5-estimation-and-sampling-theory.html"><a href="week-5-estimation-and-sampling-theory.html#stroop-data-exercises"><i class="fa fa-check"></i><b>5.4.1</b> Stroop data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html"><i class="fa fa-check"></i><b>6</b> Week 6: Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="6.1" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#learning-goals-5"><i class="fa fa-check"></i><b>6.1</b> Learning goals</a></li>
<li class="chapter" data-level="6.2" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#research-methods-hypothesis-testing"><i class="fa fa-check"></i><b>6.2</b> Research methods: hypothesis testing</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-1-3"><i class="fa fa-check"></i><b>6.2.1</b> Question 1</a></li>
<li class="chapter" data-level="6.2.2" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-2-3"><i class="fa fa-check"></i><b>6.2.2</b> Question 2</a></li>
<li class="chapter" data-level="6.2.3" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-3-3"><i class="fa fa-check"></i><b>6.2.3</b> Question 3</a></li>
<li class="chapter" data-level="6.2.4" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-4-3"><i class="fa fa-check"></i><b>6.2.4</b> Question 4</a></li>
<li class="chapter" data-level="6.2.5" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-5-3"><i class="fa fa-check"></i><b>6.2.5</b> Question 5</a></li>
<li class="chapter" data-level="6.2.6" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-6-3"><i class="fa fa-check"></i><b>6.2.6</b> Question 6</a></li>
<li class="chapter" data-level="6.2.7" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-7-2"><i class="fa fa-check"></i><b>6.2.7</b> Question 7</a></li>
<li class="chapter" data-level="6.2.8" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-8-2"><i class="fa fa-check"></i><b>6.2.8</b> Question 8</a></li>
<li class="chapter" data-level="6.2.9" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#question-9-1"><i class="fa fa-check"></i><b>6.2.9</b> Question 9</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#t-tests-in-r"><i class="fa fa-check"></i><b>6.3</b> <span class="math inline">\(t\)</span>-tests in R</a></li>
<li class="chapter" data-level="6.4" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#stroop-data"><i class="fa fa-check"></i><b>6.4</b> Stroop data</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="week-6-hypothesis-testing.html"><a href="week-6-hypothesis-testing.html#t-test-exercises"><i class="fa fa-check"></i><b>6.4.1</b> <span class="math inline">\(t\)</span>-test exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="function-list.html"><a href="function-list.html"><i class="fa fa-check"></i><b>7</b> Function list</a>
<ul>
<li class="chapter" data-level="7.1" data-path="function-list.html"><a href="function-list.html#week-1"><i class="fa fa-check"></i><b>7.1</b> Week 1</a></li>
<li class="chapter" data-level="7.2" data-path="function-list.html"><a href="function-list.html#week-2"><i class="fa fa-check"></i><b>7.2</b> Week 2</a></li>
<li class="chapter" data-level="7.3" data-path="function-list.html"><a href="function-list.html#week-3"><i class="fa fa-check"></i><b>7.3</b> Week 3</a></li>
<li class="chapter" data-level="7.4" data-path="function-list.html"><a href="function-list.html#week-4"><i class="fa fa-check"></i><b>7.4</b> Week 4</a></li>
<li class="chapter" data-level="7.5" data-path="function-list.html"><a href="function-list.html#week-5"><i class="fa fa-check"></i><b>7.5</b> Week 5</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>8</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lab manual QuantRMA</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="week-3-correlation-and-causation" class="section level1" number="3">
<h1><span class="header-section-number"> 3</span> Week 3: Correlation and Causation</h1>
<p>In lecture and in the textbook, we have been discussing the idea of correlation. This is the idea that two things that we measure can be somehow related to one another. For example, your personal happiness, which we could try to measure say with a questionnaire, might be related to other things in your life that we could also measure, such as number of close friends, yearly salary, how much chocolate you have in your bedroom, or how many times you have said the word Nintendo in your life. Some of the relationships that we can measure are meaningful, and might reflect a causal relationship where one thing causes a change in another thing. Some of the relationships are spurious, and do not reflect a causal relationship.</p>
<p>In this lab we will first discuss several research design concepts related to establishing causal relationships. In the second part of the lab you will learn how to compute correlations between two variables and answer some questions about the relationships between those variables. To get started, download the <a href="https://github.com/thomashulst/quantrma_lab/raw/master/Labs/Lab03_CorrelationCausation.Rmd">lab template here</a> (right click: save as) or from Canvas. Copy the lab template to your lab folder and double click the <strong>Lab project file</strong> (not the .Rmd) to open RStudio.</p>
<div id="learning-goals-2" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Learning goals</h2>
<p>During this lab you will do the following:</p>
<ol style="list-style-type: decimal">
<li>Discuss relationships between variables and how to establish causal relationships</li>
<li>Discuss the possible meaning of correlations that you observe</li>
<li>Learn how to compute and visualize Pearson’s <span class="math inline">\(r\)</span> between two variables in R</li>
</ol>
</div>
<div id="research-methods-causality" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Research methods: causality</h2>
<p>Discuss the research methods questions about causality in your breakout room and register the answers in the R Markdown template.</p>
<div id="question-1-1" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Question 1</h3>
<p>Take a close look at the following two examples. Each example consists of a graph showing the fluctuation of two variables and a statement suggesting how to interpret such evidence. Are these statements correct? Explain your answer.</p>
<div id="example-1" class="section level4" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> Example 1</h4>
<p>There is a positive causal relationship between the number of people who drowned by falling into a pool and the number of films Nicolas Cage appeared in.</p>
<div class="figure"><span id="fig:example1"></span>
<img src="figures/cage.png" alt="Relationship between number of drownings and films Nicolage Cage appeared in. Illustration by [Tyler Vigen](https://www.tylervigen.com/spurious-correlations)." width="75%" />
<p class="caption">
Figure 3.1: Relationship between number of drownings and films Nicolage Cage appeared in. Illustration by <a href="https://www.tylervigen.com/spurious-correlations">Tyler Vigen</a>.
</p>
</div>
</div>
<div id="example-2" class="section level4" number="3.2.1.2">
<h4><span class="header-section-number">3.2.1.2</span> Example 2</h4>
<p>There is a positive causal relationship between per capita consumption of mozzarella cheese and civil engineering doctorates awarded.</p>
<div class="figure"><span id="fig:example2"></span>
<img src="figures/mozerella.png" alt="Relationship between mozerella consumption and civil engineering doctorates. Illustration by [Tyler Vigen](https://www.tylervigen.com/spurious-correlations)." width="75%" />
<p class="caption">
Figure 3.2: Relationship between mozerella consumption and civil engineering doctorates. Illustration by <a href="https://www.tylervigen.com/spurious-correlations">Tyler Vigen</a>.
</p>
</div>
</div>
</div>
<div id="question-2-1" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Question 2</h3>
<p>For both scenarios described below, identify a possible confounder (variable Z) and describe its association with variables X and Y.</p>
<ol style="list-style-type: decimal">
<li>The observation that when ice cream sales go up drownings of people in swimming pools increase, led the researcher to believe that ice cream consumption increases drownings.</li>
<li>The observation that there is a very strong correlation between the use of social media and symptoms of depression, led the researcher to believe that excessive use of social media causes symptoms of depression.</li>
</ol>
</div>
<div id="question-3-1" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Question 3</h3>
<p>The case below presents an empirical observation that leads to a proposition. First, you are asked to identify the problem with this proposition. Then, you must provide a solution to overcome this issue. Your proposed solution should strengthen claims of a causal relationship between variables X and Y.</p>
<p>Your proposed solution should satisfy the following:</p>
<ul>
<li>Clearly identify the source of variation in the independent variable (i.e. define groups)</li>
<li>Indicate how you would use the variation in the independent variable to test against the proposed causal relationship</li>
<li>There is enough variation in the independent variable (i.e. number of groups) such that the effect of interest can be identified in sufficient detail.</li>
</ul>
<p><strong>Case</strong></p>
<ul>
<li>Observation: We observe that people who exercise their hobbies regularly tend to be happier.</li>
<li>Proposition: The more one exercises his or her hobbies, the happier he or she will be.</li>
<li>Problem:</li>
<li>Solution:</li>
</ul>
</div>
<div id="question-4-1" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Question 4</h3>
<p>In the case from the previous question: how would you test the empirical validity of competing explanations? For example, how could you test that exercising a hobby has a stronger effect for non-retirees than it has for retirees?</p>
</div>
<div id="question-5-1" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Question 5</h3>
<p>In the previous question, you provided solutions to ambiguously formulated claims of causal relationships, in order to strengthen their empirical validity and to be able to draw meaningful conclusions. However, meaningful conclusions should be obtained from meaningful comparisons.</p>
<p>According to the textbook, what does a meaningful comparison entail?</p>
</div>
<div id="question-6-1" class="section level3" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> Question 6</h3>
<p>According to the textbook, how can we obtain meaningful comparisons?</p>
</div>
<div id="question-7-1" class="section level3" number="3.2.7">
<h3><span class="header-section-number">3.2.7</span> Question 7</h3>
<p>The textbook discusses three different types of interventions (independent variables). Briefly describe what they are and provide an example of your own.</p>
</div>
<div id="question-8" class="section level3" number="3.2.8">
<h3><span class="header-section-number">3.2.8</span> Question 8</h3>
<p>Read the following two cases and decide whether or not the described experiment is internally valid. <em>If not</em>, identify the threat to internal validity by choosing from the options below.</p>
<ol style="list-style-type: lower-alpha">
<li>Selection bias</li>
<li>Demand characteristics effect</li>
<li>History effect</li>
<li>Maturation effect</li>
<li>Repeated testing effect</li>
<li>Regression to the mean</li>
<li>Differential attrition</li>
<li>Non-response bias</li>
<li>Experimenter bias</li>
<li>Placebo effect</li>
</ol>
<div id="case-1" class="section level4" number="3.2.8.1">
<h4><span class="header-section-number">3.2.8.1</span> Case 1</h4>
<p>It was the start of a new swim season, and the coach was already concerned about her swimmers’ lack of effort during the 20-minute dry-land portion of practice. She felt they didn’t take it seriously enough, and too often they would be talking or slacking off rather than doing the required stretches and exercises. She consulted with a sports psychologist. He suggested that she write the names of all 20 swimmers on individual slips of paper, scramble them, and then pick ten without looking. This would be used to assign swimmers to a Non-contingent Group (the first ten), who would have trainings on Monday, Wednesday and Friday, and a Contingent Group (the remainder), who would have training on Tuesday, Thursday, and Saturday. The coach thought it would be easier simply to assign the swimmers to groups on the basis of friendship, but she changed her mind after the psychologist explained the rationale for this slightly more cumbersome procedure.</p>
<p>The intervention was that swimmers in the Contingent Group were told that if their dry-land productivity as a group for the day was 15% better than their average in the previous week then music would be played at the following practice. The productivity of the Non-contingent Group had no bearing on the playing of music. Then, each practice day for one week, observers unobtrusively recorded the swimmers’ productive behaviors during the dry-land training portion and calculated the percentage of one-minute intervals in which all swimmers in a group were being productive. Following this intervention, the dry-land productivity of the Contingent group was found to be higher than that of the Non-Contingent group so we can conclude that making the playing of music contingent on the swimmers’ dry-land productivity resulted in an increase in that productivity.</p>
</div>
<div id="case-2" class="section level4" number="3.2.8.2">
<h4><span class="header-section-number">3.2.8.2</span> Case 2</h4>
<p>Psychoanalysts at two different hospitals were asked to judge the well-being of a young man being interviewed on videotape. By the flip of a coin, psychoanalysts at a publicly-funded hospital were assigned to the Normal Group and psychoanalysts at a privately-funded hospital were assigned to the Abnormal Group. In the Normal Group, the doctors were told that the young man was a job applicant; in the Abnormal Group, the doctors were told that he was a patient. The mean adjustment rating by psychoanalysts in the Normal Group was 7 out of 8 compared to a 3.5 out of 8 rating by doctors in the Abnormal Group. We can conclude that the psychoanalysts’ ratings were affected by the label used to describe the young man.</p>
</div>
</div>
</div>
<div id="correlations-in-r" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Correlations in R</h2>
<p>In this part of the lab we will use R to explore correlations between two variables. Make sure you really follow along with the code examples given.</p>
<div id="corforcor" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> <code>cor()</code> for correlation</h3>
<p>R has the <code>cor</code> function for computing <strong>Pearson</strong>’s <span class="math inline">\(r\)</span> between any two variables. In fact this same function can compute other versions of correlation as well (Spearman and Kendall), but we’ll skip those here. To use the function you just need two variables with numbers in them like this:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="week-3-correlation-and-causation.html#cb156-1" aria-hidden="true" tabindex="-1"></a>x  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">9</span>)</span>
<span id="cb156-2"><a href="week-3-correlation-and-causation.html#cb156-2" aria-hidden="true" tabindex="-1"></a>y  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">10</span>,<span class="dv">13</span>)</span>
<span id="cb156-3"><a href="week-3-correlation-and-causation.html#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(x,y)</span></code></pre></div>
<pre><code>## [1] 0.76539</code></pre>
<div id="scatterannote" class="section level4" number="3.3.1.1">
<h4><span class="header-section-number">3.3.1.1</span> Scatterplots</h4>
<p>Let’s take our toy example, and plot the data in a scatterplot using ggplot2. Let’s also return the correlation and print it on the scatter plot. Remember, ggplot2 wants the data in a <code>data.frame</code>, so we first put our x and y variables in a data frame.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="week-3-correlation-and-causation.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb158-2"><a href="week-3-correlation-and-causation.html#cb158-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-3"><a href="week-3-correlation-and-causation.html#cb158-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,y)</span>
<span id="cb158-4"><a href="week-3-correlation-and-causation.html#cb158-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-5"><a href="week-3-correlation-and-causation.html#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y))<span class="sc">+</span></span>
<span id="cb158-6"><a href="week-3-correlation-and-causation.html#cb158-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb158-7"><a href="week-3-correlation-and-causation.html#cb158-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label=</span> <span class="fu">round</span>(<span class="fu">cor</span>(x,y),<span class="dv">2</span>), <span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="quantrma_lab_files/figure-html/unnamed-chunk-72-1.png" width="672" /></p>
<p>Wow, we’re moving fast here. Dissect the code above and see if you understand each step.</p>
</div>
<div id="lotsofscatter" class="section level4" number="3.3.1.2">
<h4><span class="header-section-number">3.3.1.2</span> Lots of scatterplots</h4>
<p>Before we move on to real data, let’s use some fake data first. Often we will have many measures of X and Y, split between a few different conditions, for example, condition A, B, C, or D. Let’s make some fake data for X and Y, for each condition A, B, C, and D.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="week-3-correlation-and-causation.html#cb159-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">40</span>,<span class="dv">0</span>,<span class="dv">1</span>) <span class="co"># rnorm() generates a normally distributed random variable</span></span>
<span id="cb159-2"><a href="week-3-correlation-and-causation.html#cb159-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">40</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb159-3"><a href="week-3-correlation-and-causation.html#cb159-3" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>), <span class="at">each=</span><span class="dv">10</span>)</span>
<span id="cb159-4"><a href="week-3-correlation-and-causation.html#cb159-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-5"><a href="week-3-correlation-and-causation.html#cb159-5" aria-hidden="true" tabindex="-1"></a>df_all <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(condition, x, y)</span></code></pre></div>
<p>We now have a data frame with 40 (random) observations over 4 different conditions:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="week-3-correlation-and-causation.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_all)</span></code></pre></div>
<pre><code>##   condition           x           y
## 1         A  1.15294283 -0.54671054
## 2         A -2.75534778  0.78033222
## 3         A  0.96713046 -0.08038262
## 4         A -0.01241593 -1.21569040
## 5         A  1.04315851  0.35492939
## 6         A -0.64981975 -0.36557823</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="week-3-correlation-and-causation.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df_all)</span></code></pre></div>
<pre><code>## Rows: 40
## Columns: 3
## $ condition &lt;chr&gt; &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;A&quot;, &quot;B&quot;, &quot;B&quot;,…
## $ x         &lt;dbl&gt; 1.15294283, -2.75534778, 0.96713046, -0.01241593, 1.0431585…
## $ y         &lt;dbl&gt; -0.54671054, 0.78033222, -0.08038262, -1.21569040, 0.354929…</code></pre>
<p>If we were to make a scatterplot of this dataframe to look at the relationship between the x and y variable, we could do the following:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="week-3-correlation-and-causation.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_all, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y))<span class="sc">+</span></span>
<span id="cb164-2"><a href="week-3-correlation-and-causation.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure"><span id="fig:1facet"></span>
<img src="quantrma_lab_files/figure-html/1facet-1.png" alt="All conditions on one scatterplot" width="672" />
<p class="caption">
Figure 3.3: All conditions on one scatterplot
</p>
</div>
<p>This visualizes the relationship between x and y over all conditions, but doesn’t allow us to see whether the relationship depends on the condition. If we would want to look at that, we need some way to visually discriminate the conditions on the scatterplot. You could do the following:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="week-3-correlation-and-causation.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_all, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">group =</span> condition, <span class="at">color =</span> condition))<span class="sc">+</span></span>
<span id="cb165-2"><a href="week-3-correlation-and-causation.html#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure"><span id="fig:1facet2"></span>
<img src="quantrma_lab_files/figure-html/1facet2-1.png" alt="All conditions in one scatterplot, but conditions are differently colored" width="672" />
<p class="caption">
Figure 3.4: All conditions in one scatterplot, but conditions are differently colored
</p>
</div>
<p>This is a bit better, but it’s still not easy to discriminate between conditions. Better would be to plot the conditions as four separate scatterplots and <a href="week-2-describing-data.html#facetwrap">the function <code>facet_wrap()</code></a> allows us to do just that:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="week-3-correlation-and-causation.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_all, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y))<span class="sc">+</span></span>
<span id="cb166-2"><a href="week-3-correlation-and-causation.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb166-3"><a href="week-3-correlation-and-causation.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>condition)</span></code></pre></div>
<div class="figure"><span id="fig:1facet3"></span>
<img src="quantrma_lab_files/figure-html/1facet3-1.png" alt="Facet wrapped scatterplot" width="672" />
<p class="caption">
Figure 3.5: Facet wrapped scatterplot
</p>
</div>
</div>
<div id="computing-the-correlations-all-at-once" class="section level4" number="3.3.1.3">
<h4><span class="header-section-number">3.3.1.3</span> Computing the correlations all at once</h4>
<p>We’ve seen how we can make four graphs at once. <code>facet_wrap()</code> will always try to make as many graphs as there are individual conditions in the condition variable. In this case there are four, so it makes four.</p>
<p>What we will do now is make a table of the correlations in addition to the scatter plot. We use functions from the <code>tidyverse</code> library to group by conditions and calculate the correlations (<code>summarise()</code>) and the function <code>kable()</code> from the <code>knitr</code> library to output a nice table:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="week-3-correlation-and-causation.html#cb167-1" aria-hidden="true" tabindex="-1"></a>df_cor <span class="ot">&lt;-</span> df_all <span class="sc">%&gt;%</span> </span>
<span id="cb167-2"><a href="week-3-correlation-and-causation.html#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition) <span class="sc">%&gt;%</span></span>
<span id="cb167-3"><a href="week-3-correlation-and-causation.html#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">correlation =</span> <span class="fu">cor</span>(x, y))</span>
<span id="cb167-4"><a href="week-3-correlation-and-causation.html#cb167-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-5"><a href="week-3-correlation-and-causation.html#cb167-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(df_cor,<span class="at">caption =</span> <span class="st">&quot;Correlation by condition.&quot;</span>)</span></code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-75">Table 3.1: </span>Correlation by condition.</caption>
<thead>
<tr class="header">
<th align="left">condition</th>
<th align="right">correlation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="right">-0.1661140</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="right">0.1351127</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="right">0.1828359</td>
</tr>
<tr class="even">
<td align="left">D</td>
<td align="right">0.1508357</td>
</tr>
</tbody>
</table>
<p>OK, we are basically ready to turn to some real data and ask if there are correlations between interesting variables… but first some exercises. Complete the following exercises in your template file.</p>
</div>
</div>
<div id="correlation-exercises" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Correlation exercises</h3>
<ol style="list-style-type: decimal">
<li>Calculate the correlation between the following two variables:</li>
</ol>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="week-3-correlation-and-causation.html#cb168-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">16</span>,<span class="dv">32</span>,<span class="dv">64</span>,<span class="cn">NA</span>,<span class="dv">256</span>,<span class="dv">512</span>)</span>
<span id="cb168-2"><a href="week-3-correlation-and-causation.html#cb168-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">7</span>,<span class="dv">4</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><p>What happens in exercise 1? What is <code>NA</code>? Copy/paste the code above and change it so you can still calculate the correlation between <code>x</code> and <code>y</code>, regardless of <code>NA</code> values.</p></li>
<li><p>The following plot has two problems: the value of the correlation is printed with a very large amount of decimals and at a weird position. Try to fix the problems in the code below.</p></li>
</ol>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="week-3-correlation-and-causation.html#cb169-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">16</span>,<span class="dv">32</span>,<span class="dv">64</span>,<span class="dv">128</span>,<span class="dv">256</span>,<span class="dv">512</span>)</span>
<span id="cb169-2"><a href="week-3-correlation-and-causation.html#cb169-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">7</span>,<span class="dv">4</span>)</span>
<span id="cb169-3"><a href="week-3-correlation-and-causation.html#cb169-3" aria-hidden="true" tabindex="-1"></a>corxy <span class="ot">&lt;-</span> <span class="fu">cor</span>(x,y)</span>
<span id="cb169-4"><a href="week-3-correlation-and-causation.html#cb169-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-5"><a href="week-3-correlation-and-causation.html#cb169-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,y)</span>
<span id="cb169-6"><a href="week-3-correlation-and-causation.html#cb169-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-7"><a href="week-3-correlation-and-causation.html#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y))<span class="sc">+</span></span>
<span id="cb169-8"><a href="week-3-correlation-and-causation.html#cb169-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb169-9"><a href="week-3-correlation-and-causation.html#cb169-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="fu">cor</span>(x,y), <span class="at">x =</span> <span class="dv">50</span>, <span class="at">y =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="quantrma_lab_files/figure-html/unnamed-chunk-77-1.png" width="672" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Looking at the plot above, why is it probably not valid to summarise this data using Pearson’s <span class="math inline">\(r\)</span>?</li>
</ol>
</div>
</div>
<div id="real-data" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Real data</h2>
<p>Let’s take a look at some correlations in real data. We are going to look at responses to a questionnaire about happiness that was sent around the world, from the <a href="http://worldhappiness.report">World Happiness Report</a>.</p>
<div id="load-the-data" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Load the data</h3>
<p>We first load the data into a data.frame:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="week-3-correlation-and-causation.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you haven&#39;t already, this will load the tidyverse library and data</span></span>
<span id="cb170-2"><a href="week-3-correlation-and-causation.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb170-3"><a href="week-3-correlation-and-causation.html#cb170-3" aria-hidden="true" tabindex="-1"></a>whr_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;data/WHR2018.csv&#39;</span>)</span></code></pre></div>
</div>
<div id="look-at-the-data-1" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Look at the data</h3>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="week-3-correlation-and-causation.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(whr_data)</span>
<span id="cb171-2"><a href="week-3-correlation-and-causation.html#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(whr_data)</span>
<span id="cb171-3"><a href="week-3-correlation-and-causation.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(whr_data)</span></code></pre></div>
<p>You should be able to see that there is data for many different countries, across a few different years. There are lots of different kinds of measures, and each are given a name. You can find in the <a href="https://worldhappiness.report">World Happiness Report</a> what each of the measures represent. For now, I’ll show you some examples of asking questions about relationships between variables within this data, then you get to ask and answer your own question.</p>
</div>
<div id="exampleq1" class="section level3" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> Example question #1</h3>
<p>For the year 2017, does a countries measure for “Social support” correlate with that countries measure for “Healthy life expectancy at birth?”</p>
<p>Let’s find out. We make the scatter plot and then calculate the correlation. We did something similar in the textbook, so the following should look familiar to you:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="week-3-correlation-and-causation.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(whr_data, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb172-2"><a href="week-3-correlation-and-causation.html#cb172-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y=</span><span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb172-3"><a href="week-3-correlation-and-causation.html#cb172-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb172-4"><a href="week-3-correlation-and-causation.html#cb172-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="quantrma_lab_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="week-3-correlation-and-causation.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(whr_data<span class="sc">$</span><span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb173-2"><a href="week-3-correlation-and-causation.html#cb173-2" aria-hidden="true" tabindex="-1"></a>    whr_data<span class="sc">$</span><span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>We see a lot of dots on the scatterplot, but the correlation has a value of NA (meaning undefined or not available). This occurred because there are some missing data points in the data and we can’t calculate a correlation over missing data. We should remove all the rows with missing data first (i.e. wrangle with our data), then calculate the correlation.</p>
<p>We do this in a couple of steps. First, we create our own data.frame with only the numbers we want to analyse. Then we select the columns we want to keep with <code>select</code> and use <code>filter</code> to remove the rows with NAs.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="week-3-correlation-and-causation.html#cb175-1" aria-hidden="true" tabindex="-1"></a>smaller_df <span class="ot">&lt;-</span> whr_data <span class="sc">%&gt;%</span></span>
<span id="cb175-2"><a href="week-3-correlation-and-causation.html#cb175-2" aria-hidden="true" tabindex="-1"></a>               <span class="fu">select</span>(country,</span>
<span id="cb175-3"><a href="week-3-correlation-and-causation.html#cb175-3" aria-hidden="true" tabindex="-1"></a>                      <span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb175-4"><a href="week-3-correlation-and-causation.html#cb175-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb175-5"><a href="week-3-correlation-and-causation.html#cb175-5" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Social support</span><span class="st">`</span>),</span>
<span id="cb175-6"><a href="week-3-correlation-and-causation.html#cb175-6" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>))</span>
<span id="cb175-7"><a href="week-3-correlation-and-causation.html#cb175-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-8"><a href="week-3-correlation-and-causation.html#cb175-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb175-9"><a href="week-3-correlation-and-causation.html#cb175-9" aria-hidden="true" tabindex="-1"></a>    smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## [1] 0.5867593</code></pre>
<p>Now we see the correlation is approximately 0.59. However, this is the correlation for all years in the dataset, not just 2017. So, we need to filter for the year 2017 as well:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="week-3-correlation-and-causation.html#cb177-1" aria-hidden="true" tabindex="-1"></a>smaller_df <span class="ot">&lt;-</span> whr_data <span class="sc">%&gt;%</span></span>
<span id="cb177-2"><a href="week-3-correlation-and-causation.html#cb177-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(country,</span>
<span id="cb177-3"><a href="week-3-correlation-and-causation.html#cb177-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb177-4"><a href="week-3-correlation-and-causation.html#cb177-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>,</span>
<span id="cb177-5"><a href="week-3-correlation-and-causation.html#cb177-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">`</span><span class="at">year</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb177-6"><a href="week-3-correlation-and-causation.html#cb177-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(<span class="st">`</span><span class="at">year</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">%&gt;%</span></span>
<span id="cb177-7"><a href="week-3-correlation-and-causation.html#cb177-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Social support</span><span class="st">`</span>),</span>
<span id="cb177-8"><a href="week-3-correlation-and-causation.html#cb177-8" aria-hidden="true" tabindex="-1"></a>                    <span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>))</span>
<span id="cb177-9"><a href="week-3-correlation-and-causation.html#cb177-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-10"><a href="week-3-correlation-and-causation.html#cb177-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smaller_df, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb177-11"><a href="week-3-correlation-and-causation.html#cb177-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y=</span><span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb177-12"><a href="week-3-correlation-and-causation.html#cb177-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb177-13"><a href="week-3-correlation-and-causation.html#cb177-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="quantrma_lab_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="week-3-correlation-and-causation.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb178-2"><a href="week-3-correlation-and-causation.html#cb178-2" aria-hidden="true" tabindex="-1"></a>    smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## [1] 0.7200551</code></pre>
<p>Although the scatter plot shows the dots are everywhere, it generally shows as social support increases, life expectancy increases. Let’s add a best fit line, so the trend is more clear. We use the <code>geom_smooth()</code> function to do this. We can also annotate the correlation value on the graph and change the <code>alpha</code> value of the dots so they blend a bit:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="week-3-correlation-and-causation.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select variables of interest and filter for NAs and year == 2017</span></span>
<span id="cb180-2"><a href="week-3-correlation-and-causation.html#cb180-2" aria-hidden="true" tabindex="-1"></a>smaller_df <span class="ot">&lt;-</span> whr_data <span class="sc">%&gt;%</span></span>
<span id="cb180-3"><a href="week-3-correlation-and-causation.html#cb180-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(country,</span>
<span id="cb180-4"><a href="week-3-correlation-and-causation.html#cb180-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb180-5"><a href="week-3-correlation-and-causation.html#cb180-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>,</span>
<span id="cb180-6"><a href="week-3-correlation-and-causation.html#cb180-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">`</span><span class="at">year</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb180-7"><a href="week-3-correlation-and-causation.html#cb180-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(<span class="st">`</span><span class="at">year</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">%&gt;%</span></span>
<span id="cb180-8"><a href="week-3-correlation-and-causation.html#cb180-8" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Social support</span><span class="st">`</span>),</span>
<span id="cb180-9"><a href="week-3-correlation-and-causation.html#cb180-9" aria-hidden="true" tabindex="-1"></a>                    <span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>))</span>
<span id="cb180-10"><a href="week-3-correlation-and-causation.html#cb180-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-11"><a href="week-3-correlation-and-causation.html#cb180-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlation</span></span>
<span id="cb180-12"><a href="week-3-correlation-and-causation.html#cb180-12" aria-hidden="true" tabindex="-1"></a>corxy <span class="ot">&lt;-</span> <span class="fu">cor</span>(smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb180-13"><a href="week-3-correlation-and-causation.html#cb180-13" aria-hidden="true" tabindex="-1"></a>             smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>)</span>
<span id="cb180-14"><a href="week-3-correlation-and-causation.html#cb180-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-15"><a href="week-3-correlation-and-causation.html#cb180-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data with best fit line</span></span>
<span id="cb180-16"><a href="week-3-correlation-and-causation.html#cb180-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smaller_df, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Social support</span><span class="st">`</span>,</span>
<span id="cb180-17"><a href="week-3-correlation-and-causation.html#cb180-17" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y=</span><span class="st">`</span><span class="at">Healthy life expectancy at birth</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb180-18"><a href="week-3-correlation-and-causation.html#cb180-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span>.<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb180-19"><a href="week-3-correlation-and-causation.html#cb180-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm,<span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb180-20"><a href="week-3-correlation-and-causation.html#cb180-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>,<span class="at">label=</span><span class="fu">paste</span>(<span class="st">&quot;Correlation:&quot;</span>,<span class="fu">round</span>(corxy,<span class="dv">2</span>)), <span class="at">x=</span><span class="fl">0.4</span>,<span class="at">y=</span><span class="dv">70</span>) <span class="sc">+</span></span>
<span id="cb180-21"><a href="week-3-correlation-and-causation.html#cb180-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="quantrma_lab_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
</div>
<div id="example-question-2" class="section level3" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> Example question #2</h3>
<p>After all that work, we can now speedily answer more questions. For example, what is the relationship between positive affect in a country and negative affect in a country? I wouldn’t be surprised if there was a negative correlation here: when positive feelings generally go up, shouldn’t negative feelings generally go down?</p>
<p>To answer this question, we just copy paste the last code block, and change the variables to be <code>Positive affect</code>, and <code>Negative affect</code>:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="week-3-correlation-and-causation.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select variables of interest and filter for NAs and year == 2017</span></span>
<span id="cb181-2"><a href="week-3-correlation-and-causation.html#cb181-2" aria-hidden="true" tabindex="-1"></a>smaller_df <span class="ot">&lt;-</span> whr_data <span class="sc">%&gt;%</span></span>
<span id="cb181-3"><a href="week-3-correlation-and-causation.html#cb181-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">select</span>(country,</span>
<span id="cb181-4"><a href="week-3-correlation-and-causation.html#cb181-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">`</span><span class="at">Positive affect</span><span class="st">`</span>,</span>
<span id="cb181-5"><a href="week-3-correlation-and-causation.html#cb181-5" aria-hidden="true" tabindex="-1"></a>                      <span class="st">`</span><span class="at">Negative affect</span><span class="st">`</span>,</span>
<span id="cb181-6"><a href="week-3-correlation-and-causation.html#cb181-6" aria-hidden="true" tabindex="-1"></a>                      <span class="st">`</span><span class="at">year</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-7"><a href="week-3-correlation-and-causation.html#cb181-7" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(<span class="st">`</span><span class="at">year</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-8"><a href="week-3-correlation-and-causation.html#cb181-8" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Positive affect</span><span class="st">`</span>),</span>
<span id="cb181-9"><a href="week-3-correlation-and-causation.html#cb181-9" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Negative affect</span><span class="st">`</span>))</span>
<span id="cb181-10"><a href="week-3-correlation-and-causation.html#cb181-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-11"><a href="week-3-correlation-and-causation.html#cb181-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate correlation</span></span>
<span id="cb181-12"><a href="week-3-correlation-and-causation.html#cb181-12" aria-hidden="true" tabindex="-1"></a>corxy <span class="ot">&lt;-</span> <span class="fu">cor</span>(smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Positive affect</span><span class="st">`</span>,</span>
<span id="cb181-13"><a href="week-3-correlation-and-causation.html#cb181-13" aria-hidden="true" tabindex="-1"></a>             smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Negative affect</span><span class="st">`</span>)</span>
<span id="cb181-14"><a href="week-3-correlation-and-causation.html#cb181-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-15"><a href="week-3-correlation-and-causation.html#cb181-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data with best fit line</span></span>
<span id="cb181-16"><a href="week-3-correlation-and-causation.html#cb181-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smaller_df, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Positive affect</span><span class="st">`</span>,</span>
<span id="cb181-17"><a href="week-3-correlation-and-causation.html#cb181-17" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y=</span><span class="st">`</span><span class="at">Negative affect</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb181-18"><a href="week-3-correlation-and-causation.html#cb181-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span>.<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb181-19"><a href="week-3-correlation-and-causation.html#cb181-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm,<span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb181-20"><a href="week-3-correlation-and-causation.html#cb181-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>,<span class="at">label=</span><span class="fu">paste</span>(<span class="st">&quot;Correlation:&quot;</span>,<span class="fu">round</span>(corxy,<span class="dv">2</span>)), <span class="at">x=</span><span class="fl">0.45</span>,<span class="at">y=</span><span class="fl">0.45</span>) <span class="sc">+</span></span>
<span id="cb181-21"><a href="week-3-correlation-and-causation.html#cb181-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="quantrma_lab_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
<p>There we have it. As positive affect goes up, negative affect goes down. A negative correlation.</p>
<p>Complete the exercises below in your lab template.</p>
</div>
<div id="theory-exercises" class="section level3" number="3.4.5">
<h3><span class="header-section-number">3.4.5</span> Theory exercises</h3>
<p>Answer the following questions in your own words:</p>
<ol style="list-style-type: decimal">
<li>Explain the difference between a correlation of r = .3 and r = .7. What does a larger value of r represent?</li>
<li>Explain the difference between a correlation of r = .5, and r = -.5.</li>
</ol>
</div>
<div id="data-exercise" class="section level3" number="3.4.6">
<h3><span class="header-section-number">3.4.6</span> Data exercise</h3>
<p>You should have all tools available to answer your own question about a relationship in the WHR dataset. This should be a different relationship (and about a different year) than the examples above. You should calculate Pearson’s <span class="math inline">\(r\)</span> of this relationship, generate a scatterplot with a best fit line, print the correlation on the scatterplot, and print the mean and standard deviation of both variables in a table. Your code should include all steps, from loading the relevant libraries and data file, to generating all the required output. Use comments throughout your code to explain what your are doing.</p>
<p>When you have completed all exercises and are happy with your progress today, please knit your lab template and submit it to Canvas. If you finish before the time is up, start with the required readings of Week 4, work on your assignment, or help out your fellow students.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="week-2-describing-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="week-4-chance-and-probability-theory.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
